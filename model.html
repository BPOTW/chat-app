<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Anonymous Chat App</title>
  <style>
    * {
      margin: 0; padding: 0; box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }
    body {
      background: #0e0e10;
      color: #f5f5f5;
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    /* Left Panel: SETTINGS */
    #settings {
      width: 25%;
      background: #18181b;
      border-right: 1px solid #2a2a2d;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    #settings h2 {
      text-align: center;
      color: #f97316;
      margin-bottom: 10px;
    }

    .setting-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    label {
      font-weight: 500;
      font-size: 0.9em;
    }

    input, select, button {
      background: #2a2a2d;
      border: none;
      color: #fff;
      padding: 10px;
      border-radius: 8px;
    }

    button {
      cursor: pointer;
      background: #f97316;
      transition: 0.3s;
    }
    button:hover { background: #fb923c; }

    .divider {
      border-bottom: 1px solid #2a2a2d;
      margin: 10px 0;
    }

    /* Center Panel: CHAT */
    #chatArea {
      width: 50%;
      display: flex;
      flex-direction: column;
      background: #0e0e10;
    }

    #chatHeader {
      background: #18181b;
      padding: 15px;
      text-align: center;
      border-bottom: 1px solid #2a2a2d;
      font-weight: 600;
    }

    #chatBox {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .message {
      max-width: 70%;
      padding: 10px 14px;
      border-radius: 12px;
      word-wrap: break-word;
    }

    .user { align-self: flex-end; background: #f97316; color: #fff; }
    .stranger { align-self: flex-start; background: #2a2a2d; color: #fff; }

    #inputArea {
      display: flex;
      padding: 10px;
      border-top: 1px solid #2a2a2d;
      gap: 8px;
    }
    #inputArea input { flex: 1; }

    #startScreen {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 15px;
      text-align: center;
    }

    .hidden { display: none !important; }

    /* Right Panel: CHAT INFO */
    #chatInfo {
      width: 25%;
      background: #18181b;
      border-left: 1px solid #2a2a2d;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    #chatInfo h3 {
      color: #f97316;
      margin-bottom: 5px;
    }

    .info-section {
      background: #2a2a2d;
      padding: 10px;
      border-radius: 8px;
    }

    ul { list-style: none; }
    li { margin-bottom: 5px; }

    .action-btn {
      width: 100%;
      margin-top: 5px;
      padding: 8px;
      border-radius: 8px;
      background: #f97316;
      border: none;
      cursor: pointer;
      color: #fff;
    }
    .action-btn:hover { background: #fb923c; }
  </style>
</head>
<body>

  <!-- SETTINGS PANEL -->
  <div id="settings">
    <h2>‚öôÔ∏è Settings</h2>

    <div class="setting-group">
      <label>Your Random ID</label>
      <div style="display:flex; gap:8px;">
        <input type="text" id="userId" readonly>
        <button id="regenId">üîÅ</button>
      </div>
    </div>

    <div class="setting-group">
      <label>Mode</label>
      <select id="modeSelect">
        <option value="public">Public Chat</option>
        <option value="private">Private Room</option>
      </select>
    </div>

    <div class="setting-group hidden" id="privateRoomOptions">
      <button id="createRoom">Create Room</button>
      <input type="text" id="roomCode" placeholder="Enter room code to join">
      <button id="joinRoom">Join Room</button>
    </div>

    <div class="divider"></div>

    <button id="startChat">Start Chat</button>
    <button id="endChat" class="hidden">End Chat</button>
    <button id="clearChat">Clear Chat</button>
    <button id="nextChat">Find Random Chat</button>
    <button id="addFriend">Add Friend</button>

    <div class="divider"></div>

    <h3>üí¨ Chat Rooms</h3>
    <button>General</button>
    <button>Gaming</button>
    <button>Study</button>
    <button>Relationships</button>
    <button>Vent Zone</button>
  </div>

  <!-- CHAT PANEL -->
  <div id="chatArea">
    <div id="chatHeader">Anonymous Chat</div>

    <div id="startScreen">
      <h2>Welcome üëã</h2>
      <p>Set your preferences and click <b>Start Chat</b> to begin.</p>
    </div>

    <div id="chatBox" class="hidden"></div>

    <div id="inputArea" class="hidden">
      <input type="text" id="messageInput" placeholder="Type your message...">
      <button id="sendBtn">Send</button>
    </div>
  </div>

  <!-- CHAT INFO PANEL -->
  <div id="chatInfo">
    <div class="info-section">
      <h3>üî∑ Chat Details</h3>
      <p><b>Mode:</b> <span id="infoMode">None</span></p>
      <p><b>Room:</b> <span id="infoRoom">-</span></p>
      <p><b>Status:</b> <span id="infoStatus">Not Connected</span></p>
    </div>

    <div class="info-section">
      <h3>üë• Participants</h3>
      <ul id="participants">
        <li>No one connected</li>
      </ul>
    </div>

    <div class="info-section">
      <h3>‚ù§Ô∏è Friends</h3>
      <ul id="friendsList">
        <li>No saved friends</li>
      </ul>
    </div>

    <div class="info-section">
      <h3>üß≠ Quick Actions</h3>
      <button class="action-btn" id="leaveRoom">Leave Room</button>
      <button class="action-btn" id="refreshConn">Refresh</button>
    </div>
  </div>

  <script>
    const randomNames = ["BlueFox", "RedWolf", "SilentStar", "GreenCat", "NightCrow"];
    const userId = document.getElementById('userId');
    const regenId = document.getElementById('regenId');
    const modeSelect = document.getElementById('modeSelect');
    const privateRoomOptions = document.getElementById('privateRoomOptions');
    const chatBox = document.getElementById('chatBox');
    const startChat = document.getElementById('startChat');
    const endChat = document.getElementById('endChat');
    const clearChat = document.getElementById('clearChat');
    const nextChat = document.getElementById('nextChat');
    const addFriend = document.getElementById('addFriend');
    const messageInput = document.getElementById('messageInput');
    const sendBtn = document.getElementById('sendBtn');
    const startScreen = document.getElementById('startScreen');
    const inputArea = document.getElementById('inputArea');
    const header = document.getElementById('chatHeader');
    const infoMode = document.getElementById('infoMode');
    const infoRoom = document.getElementById('infoRoom');
    const infoStatus = document.getElementById('infoStatus');
    const participants = document.getElementById('participants');
    const friendsList = document.getElementById('friendsList');

    let currentFriendList = [];
    let currentRoom = "";
    let nickname = "";

    function generateId() {
      const name = randomNames[Math.floor(Math.random() * randomNames.length)];
      return `${name}#${Math.floor(Math.random() * 9999)}`;
    }

    userId.value = generateId();

    regenId.onclick = () => userId.value = generateId();

    modeSelect.onchange = () => {
      if (modeSelect.value === "private") privateRoomOptions.classList.remove('hidden');
      else privateRoomOptions.classList.add('hidden');
    };

    startChat.onclick = () => {
      nickname = userId.value;
      const mode = modeSelect.value;
      currentRoom = mode === "public" ? "RANDOM-" + Math.floor(Math.random() * 10000) : "PRIVATE-" + Math.floor(Math.random() * 10000);
      startScreen.classList.add('hidden');
      chatBox.classList.remove('hidden');
      inputArea.classList.remove('hidden');
      startChat.classList.add('hidden');
      endChat.classList.remove('hidden');
      header.textContent = "Chat Room: " + currentRoom;
      infoMode.textContent = mode.toUpperCase();
      infoRoom.textContent = currentRoom;
      infoStatus.textContent = "Connected";
      participants.innerHTML = `<li>You (${nickname})</li><li>Stranger#${Math.floor(Math.random() * 9999)}</li>`;
      addMessage("stranger", "You are now connected!");
    };

    endChat.onclick = () => {
      resetChat();
    };

    clearChat.onclick = () => {
      chatBox.innerHTML = "";
      addMessage("system", "Chat cleared.");
    };

    nextChat.onclick = () => {
      addMessage("system", "Finding new stranger...");
      setTimeout(() => {
        addMessage("stranger", "Connected to new stranger!");
      }, 1000);
    };

    addFriend.onclick = () => {
      const friendId = participants.children[1]?.textContent || "Stranger#0000";
      if (!currentFriendList.includes(friendId)) {
        currentFriendList.push(friendId);
        updateFriendsList();
        addMessage("system", `Added ${friendId} as friend.`);
      }
    };

    sendBtn.onclick = () => {
      const text = messageInput.value.trim();
      if (!text) return;
      addMessage("user", text);
      messageInput.value = "";
      setTimeout(() => addMessage("stranger", "Echo: " + text), 700);
    };

    function addMessage(sender, text) {
      const msg = document.createElement('div');
      msg.className = `message ${sender}`;
      msg.textContent = (sender === "user" ? nickname + ": " : "") + text;
      chatBox.appendChild(msg);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function updateFriendsList() {
      friendsList.innerHTML = currentFriendList.map(f => `<li>${f}</li>`).join('') || "<li>No saved friends</li>";
    }

    function resetChat() {
      chatBox.innerHTML = "";
      startScreen.classList.remove('hidden');
      chatBox.classList.add('hidden');
      inputArea.classList.add('hidden');
      startChat.classList.remove('hidden');
      endChat.classList.add('hidden');
      header.textContent = "Anonymous Chat";
      infoMode.textContent = "None";
      infoRoom.textContent = "-";
      infoStatus.textContent = "Not Connected";
      participants.innerHTML = "<li>No one connected</li>";
    }
  </script>
</body>
</html>
